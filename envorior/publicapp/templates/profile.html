{% extends 'publicparent.html' %} {% load static %} 
{% block title %} Profile{% endblock title %} 
{%block content%}
<div class="profile">
  
  <div class="upper">
    <div class="items">

      <div class="user-profile"  style="position: relative;">
        {% if current_user_details.profile_picture %}
          <a><img class="profile-img" src="{{ current_user_details.profile_picture.url }}" alt=""></a>   
        {% else %}
          <a><img class="profile-img" src="{% static 'img/profile.png' %}" alt=""></a>
        {% endif %}
    
        <label  class="plus-icon" data-bs-toggle="modal" data-bs-target="#profileModal">+</label>
      </div> 
      <p class="txt-2">{{current_user_details.full_name}}</p>

  

      </div>

      <div class="items">
        <p class="txt-2">No of post</p>
        <p class="txt-2">{{current_user_details.followers.count}}</p>
      </div>
      <div class="items">
        <p class="txt-2">{{current_user_details.followers.count}}</p>
        <p class="txt-2">Follower</p>
      </div>
      <div class="items">
        <p class="txt-2">{{current_user_details.followings.count}}</p>
        <p class="txt-2">Following</p>
      </div>
     
    </div>
    <div class="row">
  
    </div>
  
    <div class="lower">
      <div class="items">
        <button class="btn btn-secondary profile-post-btn">Post</button>
      </div>
      <div class="items">
        <button class="btn btn-secondary profile-complain-btn">complain</button>
      </div>
      <div class="items">
        <button class="btn btn-secondary profile-job-btn">Job</button>
      </div>
      <div class="items">
        <button class="btn btn-secondary profile-donation-btn">Donation</button>
      </div>
      <!-- <div class="items">
        <a href="{% url 'publicapp:usercomplain' %}"><button class="btn btn-secondary">Complain</button></a>
      </div>
      <div class="items">
        <a href="{% url 'publicapp:userjob' %}"><button class="btn btn-secondary">Job</button></a>
      </div>
      <div class="items">
        <a href="{% url 'publicapp:userdonation' %}"><button class="btn btn-secondary">Donation</button></a>
      </div> -->
    </div>

  </div>
  <!--  profile data -->

  

  <div class="profile-data">
    
<!-- #showing user complain -->
{% for c in complain %}
<div class="feed-post profile-complain">
  <div class="feed-header">
     <div class="user-profile">
        {% if c.complain_by.profile_picture %} 
             <a href=""><img class="profile-img" src="{{ c.complain_by.profile_picture.url }}" alt=""/> </a>
        {% else %}
             <a href=""><img class="profile-img" src="" alt=""/> </a>
        {% endif %} 
    </div>
        <div class="profile-txt">
         <a href="" class="txt-2"><p>complaints type : {{c.complain_type}}</p></a>
         <a href="" class="txt-3"><p>complaints by : {{c.complain_by.full_name}}</p></a>
         
        </div>     
            </div>
  <div class="feed-content">
     <p class="txt-3">description: {{c.description}}</p>
     <p class="txt-3">location: {{c.complain_location}}</p>
          <div style="object-fit: cover;">
              {% if c.complain_image %} 
                 <a href=""><img src="{{ c.complain_image.url }}" alt="" height="100%" width="100%"/> </a>
              {% else %}
                 <a href=""><img  src="{% static 'img/profile.png' %}" alt="" height="100%" width="100%"/> </a>
              {% endif %}
          </div>
          
  </div>

  <div class="feed-footer">
    
     <a href="/solvecomplain/{{c.c_id}}" class="text-decoration-none">
      {% if c.complain_status == 'solved' %}
        <span class="txt-1" style="background-color: rgb(58, 214, 19);" >Solved</span>
      {% else %} 
        <span class="txt-1" style="background-color: red;" >Unsolved</span> 
      {% endif %}
    </a>
    <div class="feed-footer">
     <a href="/deletecomplain/{{c.c_id}}" class="text-decoration-none">
      
       <span class="txt-1">Delete complain</span>
   </a>
 </div>
  </div>
 
</div>
{% endfor %}
    
   <!-- #showing user donation -->
   {% for d in donation %}
   <div class="feed-post profile-donation">
      <div class="feed-header" style="padding-right: 1rem;">
         <div class="user-profile">
            {% if d.donated_by.profile_picture %}
               <a><img class="profile-img" src="{{d.donated_by.profile_picture.url}}" alt=""></a>
            {% else %}
               <a><img class="profile-img" src="" alt=""></a>
            {% endif %}   
            <div class="profile-txt">
            <a href="" class="txt-2"><p>{{d.donated_by.full_name}}</p></a>
            <a href="" class="txt-3"><p></p></a>
         </div>    
         </div>  
      </div>
      <div class="feed-content">
         <p class="txt-2">Donation Type</p>
         <p class="txt-3">{{d.donation_type}}</p>
         
            
         <p class="txt-2">Description</p>
         <p class="txt-3">{{d.description}}</p>
            
         <p class="txt-2">Donar locations</p>
         <p class="txt-3">{{d.donar_location}}</p>

         <div style="object-fit: cover;">
            {% if d.product_image %}
              <img src="{{d.product_image.url}}" height="100%" width="100%">
            {% endif %}  
         </div>
            
            
      </div>

      
      <div class="feed-footer">
         <a href="/deletedonation/{{d.d_id}}" class="text-decoration-none">
          
           <span class="txt-1">Delete Donation</span>
       </a>
     </div>
   </div>
{% endfor %}
    <!-- this is post data -->
  {% for post in post %}
  <div class="feed-post profile-post">
     <div class="feed-header">
        <div class="user-profile">
           <!-- get profile picture of postby -->
                 {% if post.postby.profile_picture %}
                 <a href="{%url 'publicapp:profile'%}">
                 <img class="profile-img" src="{{ post.postby.profile_picture.url }}" alt=""/>
                 </a>
                 {% else %}
                 <a href="{%url 'publicapp:profile'%}">
                 <img class="profile-img" src="{% static 'img/profile.png' %}" alt=""/>
                 </a>
                 {% endif %}
           <div class="profile-txt">
            <a href="" class="txt-2"><p>{{post.postby.full_name}}</p></a>
            <a href="" class="txt-3"><p>{{post.posteddate}}</p></a>
            
         </div>     
               </div>
     </div>
     <div class="feed-content">
        <p class="txt-3">{{post.postcaption}}</p>
             <div style="object-fit: cover;">
              <img src="{{post.postimage.url}}" height="100%" width="100%">
             </div>
             
     </div>
     <div class="feed-footer">
         <a href="/deletepost/{{post.pid}}" class="text-decoration-none">
          
           <span class="txt-1">Delete Post</span>
       </a>
     </div>
  </div>
  {% endfor %}
  <!-- this is job data -->
  {% for job in jobs %}
  <div class="feed-post profile-job">
     <div class="feed-header" style="padding-right: 1rem;">
        <div class="user-profile">
           {% if job.job_by.profile_picture %}
             <a><img class="profile-img" src="{{ job.job_by.profile_picture.url }}" alt=""></a>
           {% else %}
             <a><img class="profile-img" src="" alt=""></a>
           {% endif %}  
           <div class="profile-txt">
            <a href="" class="txt-2"><p>{{job.job_by.full_name}}</p></a>
            <a href="" class="txt-3"><p>{{job.job_post_date}}</p></a>
         </div>    
         </div>  
     </div>
     <div class="feed-content">
        <p class="txt-2">Job Type</p>
        <p class="txt-3">{{job.job_type}}</p>
            
        <p class="txt-2">Required Skills</p>
        <p class="txt-3">{{job.skill_required}}</p>
            
        <p class="txt-2">Salary</p>
        <p class="txt-3">{{job.salary}}</p>
            
        <p class="txt-2">Job Description</p>
        <p class="txt-3">{{job.job_description}}</p>
            
        <p class="txt-2">Job Location</p>
        <p class="txt-3">{{job.job_location}}</p>
              
     </div>
        <div class="feed-footer">
           <a href="/deletejob/{{job.j_id}}">
              <button type="submit" class="btn btn-primary">Delete Job</button>
          </a>
        </div>
  </div>
  {% endfor %}
</div>
 




</div>


 

 <!-- profile pop-up -->
 <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen-sm-down">
     <div class="modal-content">
        <div class="modal-header">
           <h1 class="modal-title fs-5" id="profileModalLabel">Create profile</h1>
           <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="">
           <!-- form for add profile -->
           <form action="{% url 'publicapp:changeuserprofile' %}" method='POST' enctype="multipart/form-data">
              {% csrf_token %}
              <div class="container" >
              
                 <div class="row mt-3">
                    <div class=""><input class="form-control w-100" type="file" name="pic" accept=".png,.jpg" placeholder=" Upload Media (Image) "></div>
                 </div>
                 <div class="row" style="width: 98.5%;">
                    <button type="submit" class="mt-3 mb-3 btn btn-primary profilebutton">Change Pic</button>
                 </div>
              </div>
          </form>
        </div>
     </div>
  </div>
</div>

{% endblock %}
